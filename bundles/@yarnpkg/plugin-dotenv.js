/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-dotenv",
factory: function (require) {
var plugin=(()=>{var F=Object.create;var g=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var l=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var p=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Q=(e,r)=>{for(var n in r)g(e,n,{get:r[n],enumerable:!0})},R=(e,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of H(r))!J.call(e,s)&&s!==n&&g(e,s,{get:()=>r[s],enumerable:!(o=G(r,s))||o.enumerable});return e};var _=(e,r,n)=>(n=e!=null?F(W(e)):{},R(r||!e||!e.__esModule?g(n,"default",{value:e,enumerable:!0}):n,e)),z=e=>R(g({},"__esModule",{value:!0}),e);var b=p((Ce,X)=>{X.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var w=p((Ae,u)=>{var O=l("fs"),I=l("path"),Z=l("os"),ee=l("crypto"),re=b(),D=re.version,ne=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function te(e){let r={},n=e.toString();n=n.replace(/\r\n?/mg,`
`);let o;for(;(o=ne.exec(n))!=null;){let s=o[1],t=o[2]||"";t=t.trim();let c=t[0];t=t.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),c==='"'&&(t=t.replace(/\\n/g,`
`),t=t.replace(/\\r/g,"\r")),r[s]=t}return r}function se(e){let r=L(e),n=i.configDotenv({path:r});if(!n.parsed)throw new Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);let o=y(e).split(","),s=o.length,t;for(let c=0;c<s;c++)try{let a=o[c].trim(),v=ie(n,a);t=i.decrypt(v.ciphertext,v.key);break}catch(a){if(c+1>=s)throw a}return i.parse(t)}function oe(e){console.log(`[dotenv@${D}][INFO] ${e}`)}function ce(e){console.log(`[dotenv@${D}][WARN] ${e}`)}function m(e){console.log(`[dotenv@${D}][DEBUG] ${e}`)}function y(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function ie(e,r){let n;try{n=new URL(r)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let o=n.password;if(!o)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=n.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let t=`DOTENV_VAULT_${s.toUpperCase()}`,c=e.parsed[t];if(!c)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${t} in your .env.vault file.`);return{ciphertext:c,key:o}}function L(e){let r=I.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(r=e.path),r.endsWith(".vault")?r:`${r}.vault`}function ae(e){return e[0]==="~"?I.join(Z.homedir(),e.slice(1)):e}function le(e){oe("Loading env from encrypted .env.vault");let r=i._parseVault(e),n=process.env;return e&&e.processEnv!=null&&(n=e.processEnv),i.populate(n,r,e),{parsed:r}}function ue(e){let r=I.resolve(process.cwd(),".env"),n="utf8",o=Boolean(e&&e.debug);e&&(e.path!=null&&(r=ae(e.path)),e.encoding!=null&&(n=e.encoding));try{let s=i.parse(O.readFileSync(r,{encoding:n})),t=process.env;return e&&e.processEnv!=null&&(t=e.processEnv),i.populate(t,s,e),{parsed:s}}catch(s){return o&&m(`Failed to load ${r} ${s.message}`),{error:s}}}function ve(e){let r=L(e);return y(e).length===0?i.configDotenv(e):O.existsSync(r)?i._configVault(e):(ce(`You set DOTENV_KEY but you are missing a .env.vault file at ${r}. Did you forget to build it?`),i.configDotenv(e))}function pe(e,r){let n=Buffer.from(r.slice(-64),"hex"),o=Buffer.from(e,"base64"),s=o.slice(0,12),t=o.slice(-16);o=o.slice(12,-16);try{let c=ee.createDecipheriv("aes-256-gcm",n,s);return c.setAuthTag(t),`${c.update(o)}${c.final()}`}catch(c){let a=c instanceof RangeError,v=c.message==="Invalid key length",E=c.message==="Unsupported state or unable to authenticate data";if(a||v){let d="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(d)}else if(E){let d="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(d)}else throw console.error("Error: ",c.code),console.error("Error: ",c.message),c}}function de(e,r,n={}){let o=Boolean(n&&n.debug),s=Boolean(n&&n.override);if(typeof r!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let t of Object.keys(r))Object.prototype.hasOwnProperty.call(e,t)?(s===!0&&(e[t]=r[t]),o&&m(s===!0?`"${t}" is already defined and WAS overwritten`:`"${t}" is already defined and was NOT overwritten`)):e[t]=r[t]}var i={configDotenv:ue,_configVault:le,_parseVault:se,config:ve,decrypt:pe,parse:te,populate:de};u.exports.configDotenv=i.configDotenv;u.exports._configVault=i._configVault;u.exports._parseVault=i._parseVault;u.exports.config=i.config;u.exports.decrypt=i.decrypt;u.exports.parse=i.parse;u.exports.populate=i.populate;u.exports=i});var A=p((Ue,C)=>{C.exports=()=>process.env.GERRIT_PROJECT?"gerrit":process.env.SYSTEM_TEAMFOUNDATIONCOLLECTIONURI?"azure-pipelines":process.env.BITRISE_IO?"bitrise":process.env.BUDDY_WORKSPACE_ID?"buddy":process.env.BUILDKITE?"buildkite":process.env.CIRRUS_CI?"cirrus":process.env.GITLAB_CI?"gitlab":process.env.APPVEYOR?"appveyor":process.env.CIRCLECI?"circle-ci":process.env.SEMAPHORE?"semaphore":process.env.DRONE?"drone":process.env.DSARI?"dsari":process.env.GITHUB_ACTIONS?"github-actions":process.env.TDDIUM?"tddium":process.env.SCREWDRIVER?"screwdriver":process.env.STRIDER?"strider":process.env.TASKCLUSTER_ROOT_URL?"taskcluster":process.env.JENKINS_URL?"jenkins":process.env["bamboo.buildKey"]?"bamboo":process.env.GO_PIPELINE_NAME?"gocd":process.env.HUDSON_URL?"hudson":process.env.WERCKER?"wercker":process.env.NETLIFY?"netlify":process.env.NOW_GITHUB_DEPLOYMENT?"now-github":process.env.GITLAB_DEPLOYMENT?"now-gitlab":process.env.BITBUCKET_DEPLOYMENT?"now-bitbucket":process.env.BITBUCKET_BUILD_NUMBER?"bitbucket-pipelines":process.env.NOW_BUILDER?"now":process.env.VERCEL_GITHUB_DEPLOYMENT?"vercel-github":process.env.VERCEL_GITLAB_DEPLOYMENT?"vercel-gitlab":process.env.VERCEL_BITBUCKET_DEPLOYMENT?"vercel-bitbucket":process.env.VERCEL_URL?"vercel":process.env.MAGNUM?"magnum":process.env.NEVERCODE?"nevercode":process.env.RENDER?"render":process.env.SAIL_CI?"sail":process.env.SHIPPABLE?"shippable":process.env.TEAMCITY_VERSION?"teamcity":process.env.CI_NAME?process.env.CI_NAME:/\/\.heroku\/node\/bin\/node$/.test(process.env.NODE||"")?"heroku":process.env.TRAVIS?"travis-ci":process.env.CODEBUILD_SRC_DIR?"aws-codebuild":process.env.CI==="woodpecker"?"woodpecker":process.env.CI==="true"||process.env.CI==="1"?"custom":process.env.BUILDER_OUTPUT?"builder":!1});var S=p((Ve,V)=>{"use strict";var U=l("os");function fe(){var e=process.env,r=e.HOME,n=e.LOGNAME||e.USER||e.LNAME||e.USERNAME;return process.platform==="win32"?e.USERPROFILE||e.HOMEDRIVE+e.HOMEPATH||r||null:process.platform==="darwin"?r||(n?"/Users/"+n:null):process.platform==="linux"?r||(process.getuid()===0?"/root":n?"/home/"+n:null):r||null}V.exports=typeof U.homedir=="function"?U.homedir:fe});var M=p((Se,k)=>{"use strict";k.exports=S()()});var Y=p((ke,f)=>{"use strict";var B=l("fs"),T=l("path"),Ee=M(),ge=B.readFileSync,he=B.statSync,h=T.join,_e=T.resolve,me=".config",Ie="utf8",De=/^\./,P=T.sep;function Te(e,r,n){r=h(e,r);var o=h(r,n),s=he(o);return s&&{cwd:e,dir:r,path:o}}function Ne(e,r,n){r=h(e,r);var o=h(r,n),s=l.resolve(o);return s&&{cwd:e,dir:r,path:s}}function N(e,r){var n=j(e,r);return n&&n.path}function j(e,r){if(!e)return null;r=r||{};var n,o=r.dir!==null&&r.dir!==void 0?r.dir:me,s=r.dot?e:e.replace(De,""),t=r.module?Ne:Te,c=_e(r.cwd||".").split(P),a=c.length;function v(E){try{return t(E,"",e)}catch{}try{return t(E,o,s)}catch{}}for(;a--;){if(n=v(c.join(P)),n)return n;c.pop()}return(r.home||r.home===null||r.home===void 0)&&(n=v(Ee),n)?n:null}function Re(e,r){if(!e)return null;r=r||{};var n=N(e,r);return n&&ge(n,{encoding:r.encoding||Ie,flag:r.flag})}function be(e,r){if(!e)return null;r=r||{},r.module=!0;var n=N(e,r);return n&&l(n)}f.exports=N;f.exports.obj=j;f.exports.read=Re;f.exports.require=be});var Le={};Q(Le,{default:()=>ye});var K=_(w()),$=_(A()),q=_(Y()),x=!!(0,$.default)();(!x||x&&process.env.YARNPLUGIN_DOTENV_CI)&&K.config({path:(0,q.default)(".env")});var Oe={},ye=Oe;return z(Le);})();
return plugin;
}
};
